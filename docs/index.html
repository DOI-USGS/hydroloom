<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="A collection of utilities that support creation of network attributes for hydrologic networks. Hydroloom implements methods and algorithms from NHDPlus &lt;doi:10.3133/ofr20191096&gt; general graph algorithms documented in Introduction to Algorithms &lt;ISBN:9780262046305&gt; and the pfafstetter coding system &lt;doi:10.1016/S0022-1694(99)00011-6&gt;.  ">
<title>Utilities to Weave Hydrologic Fabrics • hydroloom</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Utilities to Weave Hydrologic Fabrics">
<meta property="og:description" content="A collection of utilities that support creation of network attributes for hydrologic networks. Hydroloom implements methods and algorithms from NHDPlus &lt;doi:10.3133/ofr20191096&gt; general graph algorithms documented in Introduction to Algorithms &lt;ISBN:9780262046305&gt; and the pfafstetter coding system &lt;doi:10.1016/S0022-1694(99)00011-6&gt;.  ">
<meta property="og:image" content="https://doi-usgs.github.io/hydroloom/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">hydroloom</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/hydroloom.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/advanced_network.html">Topological Sort Based Network Attributes</a>
    <a class="dropdown-item" href="articles/flow-table.html">NHD Flow Table with Hydroloom</a>
    <a class="dropdown-item" href="articles/non-dendritic.html">Non-dendritic networks</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/DOI-USGS/hydroloom/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="hydroloom-">hydroloom <a class="anchor" aria-label="anchor" href="#hydroloom-"></a>
</h1>
</div>
<p><a href="https://github.com/DOI-USGS/hydroloom/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/DOI-USGS/hydroloom/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a> <a href="https://app.codecov.io/gh/doi-usgs/hydroloom" class="external-link"><img src="https://codecov.io/gh/doi-usgs/hydroloom/branch/main/graph/badge.svg" alt="codecov"></a></p>
<div class="section level2">
<h2 id="hydroloom">hydroloom:<a class="anchor" aria-label="anchor" href="#hydroloom"></a>
</h2>
<p><strong>Install:</strong> remotes::install_github(“doi-usgs/hydroloom”)</p>
<p><code>hydroloom</code> is a collection of functions to work with hydrologic geospatial fabrics. Hydroloom is designed to provide general hydrologic network functionality for any hydrographic or hydrologic data. The package intended for developers of workflows and other packages that require low level network and network data manipulation utilities.</p>
<p><strong>To Learn More, visit the pkgdown site</strong>: <a href="https://doi-usgs.github.io/hydroloom/articles/hydroloom.html" class="uri">https://doi-usgs.github.io/hydroloom/articles/hydroloom.html</a></p>
<p>Hyroloom has support for attributes that can be seen in:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">hydroloom</span><span class="fu">::</span><span class="va"><a href="reference/hydroloom_name_definitions.html">hydroloom_name_definitions</a></span></span></code></pre></div>
<details><summary>
Click to See Definitions
</summary><table class="table">
<colgroup>
<col width="11%">
<col width="88%">
</colgroup>
<thead><tr class="header">
<th align="left">Name</th>
<th align="left">Definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">id</td>
<td align="left">shared network identifier for catchment divide and flowpath or flowline</td>
</tr>
<tr class="even">
<td align="left">toid</td>
<td align="left">indicates to the downstream id. May or may not be dendritic</td>
</tr>
<tr class="odd">
<td align="left">fromnode</td>
<td align="left">indicates the node representing the nexus upstream of a catchment</td>
</tr>
<tr class="even">
<td align="left">tonode</td>
<td align="left">indicates the node representing the nexus downstream of a catchment</td>
</tr>
<tr class="odd">
<td align="left">divergence</td>
<td align="left">indicates whether a catchment is not downstream of a diversion (0), the primary path downstream of a divergence (1), or a minor path downstream of a diversion (2).</td>
</tr>
<tr class="even">
<td align="left">wbid</td>
<td align="left">waterbody id</td>
</tr>
<tr class="odd">
<td align="left">total_da_sqkm</td>
<td align="left">total drainage area at the outlet of a catchment</td>
</tr>
<tr class="even">
<td align="left">da_sqkm</td>
<td align="left">local drainage area of a catchment</td>
</tr>
<tr class="odd">
<td align="left">length_km</td>
<td align="left">length of a single catchment’s flowpath</td>
</tr>
<tr class="even">
<td align="left">pathlength_km</td>
<td align="left">distance from the outlet of a catchment to the terminal outlet of a network</td>
</tr>
<tr class="odd">
<td align="left">arbolate_sum</td>
<td align="left">total accumulated length of all upstream flowlines</td>
</tr>
<tr class="even">
<td align="left">topo_sort</td>
<td align="left">Similar to hydrosequence in NHDPlus. Large topo_sort values are upstream of small topo_sort values. Note that there are many valid topological sort orders of a directed graph.</td>
</tr>
<tr class="odd">
<td align="left">up_topo_sort</td>
<td align="left">topo sort value of the upstream mainstem</td>
</tr>
<tr class="even">
<td align="left">dn_topo_sort</td>
<td align="left">topo sort value of the downstream mainstem</td>
</tr>
<tr class="odd">
<td align="left">dn_minor_topo_sort</td>
<td align="left">topo sort value of the downstream minor network element with the smallest id</td>
</tr>
<tr class="even">
<td align="left">terminal_topo_sort</td>
<td align="left">topo sort value of the outlet network element</td>
</tr>
<tr class="odd">
<td align="left">terminal_flag</td>
<td align="left">1 for network terminous 0 for within network</td>
</tr>
<tr class="even">
<td align="left">terminal_id</td>
<td align="left">id of terminal catchment for entire drainage basin</td>
</tr>
<tr class="odd">
<td align="left">start_flag</td>
<td align="left">1 for a headwater, 0 otherwise</td>
</tr>
<tr class="even">
<td align="left">levelpath</td>
<td align="left">provides an identifier for the collection of flowpaths that make up a single mainstem flowpath of a drainage basin</td>
</tr>
<tr class="odd">
<td align="left">up_levelpath</td>
<td align="left">levelpath value of the upstream mainstem</td>
</tr>
<tr class="even">
<td align="left">dn_levelpath</td>
<td align="left">levelpath value of the downstream mainstem</td>
</tr>
<tr class="odd">
<td align="left">levelpath_outlet_id</td>
<td align="left">id of outlet catchment of a levelpath</td>
</tr>
<tr class="even">
<td align="left">stream_level</td>
<td align="left">starting at 1 for coastal terminals and 4 for inland terminals increments by 1 for each smaller tributary level</td>
</tr>
<tr class="odd">
<td align="left">dn_stream_level</td>
<td align="left">stream level of downstream mainstem network element</td>
</tr>
<tr class="even">
<td align="left">stream_order</td>
<td align="left">starting at 1 for headwaters increments by 1 for each larger tributary level, divergences adopt stream order from upstream but returning divergent network does not increment stream order</td>
</tr>
<tr class="odd">
<td align="left">stream_calculator</td>
<td align="left">starting at 1 for headwaters and 0 along diverted paths increments by 1 for each larger tributary level, does no increment along diverted paths. Is equal to stream_order along the dendritic network</td>
</tr>
<tr class="even">
<td align="left">feature_type</td>
<td align="left">descriptive feature type moniker</td>
</tr>
<tr class="odd">
<td align="left">feature_type_code</td>
<td align="left">compact feature type identifier</td>
</tr>
<tr class="even">
<td align="left">vector_proc_unit</td>
<td align="left">identifier for processing units based on vector encapsulation</td>
</tr>
<tr class="odd">
<td align="left">raster_proc_unit</td>
<td align="left">identifier for processing units based on raster encapsulation</td>
</tr>
<tr class="even">
<td align="left">id_measure</td>
<td align="left">interpolative linear reference measure along a single identified feature</td>
</tr>
<tr class="odd">
<td align="left">aggregate_id</td>
<td align="left">aggregate identifier useful for ‘reach’ or ‘flowpath’ aggregation of flowlines</td>
</tr>
<tr class="even">
<td align="left">aggregate_id_measure</td>
<td align="left">interpolative linear reference measure along an aggregate feature</td>
</tr>
<tr class="odd">
<td align="left">aggregate_id_from_measure</td>
<td align="left">interpolative linear reference for downstream end of a single feature that makes up an aggregate feature</td>
</tr>
<tr class="even">
<td align="left">aggregate_id_to_measure</td>
<td align="left">interpolative linear reference for the upstream end of a single feature that makes up an aggregate feature</td>
</tr>
<tr class="odd">
<td align="left">point_id</td>
<td align="left">identifier of hydrologic location point</td>
</tr>
<tr class="even">
<td align="left">offset</td>
<td align="left">offset distance from point to line in units of linear reference analysis units</td>
</tr>
</tbody>
</table></details><p><br></p>
<p><code>hydroloom</code> supports your attribute names that map to the in-built definitions. See <a href="https://doi-usgs.github.io/hydroloom/reference/hydroloom_names.html"><code>hydroloom_names()</code></a> for more.</p>
<p><code>hydroloom</code> supports both dendritic and non-dendritic networks start at <a href="https://doi-usgs.github.io/hydroloom/articles/non-dendritic.html">this vignette</a> for more.</p>
<p><code>hydroloom</code> was largely created from components of <a href="https://doi.org/10.5066/P97AS8JD" class="external-link">nhdplusTools</a>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>Blodgett, D., Johnson, J.M., <span class="dv">2022</span>, nhdplusTools<span class="sc">:</span> Tools <span class="cf">for</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  Accessing and Working with the NHDPlus,</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  https<span class="sc">:</span><span class="er">//</span>doi.org<span class="sc">/</span><span class="fl">10.5066</span><span class="sc">/</span>P97AS8JD</span></code></pre></div>
<p><code>hydroloom</code> will support some key functionality of <code>nhdplusTools</code>. Some components of <code>nhdplusTools</code> will be deprecated in a future version of the package in favor of the <code>hydroloom</code> implementation. In general, <code>nhdplusTools</code> will continue to support web service functionality and particulars of the NHDPlus data model. In contrast, <code>hydroloom</code> is intended to be more general and focused specifically on hydro fabric data functionality.</p>
<p><code>hydroloom</code> implements algorithms documented in:</p>
<p>NHDPlus Attributes:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>Moore, R.B., McKay, L.D., Rea, A.H., Bondelid, T.R., Price, C.V., Dewald, T.G., </span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  and Johnston, C.M., <span class="dv">2019</span>, User<span class="st">'s guide for the national hydrography dataset </span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="st">  plus (NHDPlus) high resolution: U.S. Geological Survey Open-File Report 2019–1096, </span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="st">  66 p., https://doi.org/10.3133/ofr20191096.</span></span></code></pre></div>
<p>Graph Concepts:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>Cormen, T. H., <span class="sc">&amp;</span> Leiserson, C. <span class="fu">E.</span> (<span class="dv">2022</span>). Introduction to </span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  Algorithms, fourth edition. MIT Press.</span></code></pre></div>
<p>Pfafstetter Attributes:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>Verdin, K. L., <span class="sc">&amp;</span> Verdin, J. <span class="fu">P.</span> (<span class="dv">1999</span>). A topological system <span class="cf">for</span> </span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  delineation and codification of the Earth<span class="st">'s river basins. </span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="st">  Journal of Hydrology, 218(1–2), 1–12. </span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="st">  https://doi.org/10.1016/S0022-1694(99)00011-6</span></span></code></pre></div>
<div class="section level3">
<h3 id="terminology">Terminology:<a class="anchor" aria-label="anchor" href="#terminology"></a>
</h3>
<p>The following definitions have been used as much as possible throughout the package.<br>
Terms for rivers:<br><strong>Flowline:</strong> A flowline is an linear geometry that represents a segment of a flowing body of water. Some flowlines have no local drainage area and are never aggregate features.<br><strong>Flowpath:</strong> A flowpath is a linear geometry that represents the connection between a catchment’s inlet and its outlet. All flowpaths have a local drainage area and may be aggregates of flowlines.<br><strong>Catchment:</strong> A physiographic unit with zero or one inlets and one outlet. A catchment is represented by one or more partial realizations; flowpath, divide, and networks of flowpaths and divides.<br><strong>Catchment Divide:</strong> The polygon boundary that encompasses a catchment.</p>
</div>
<div class="section level3">
<h3 id="design-notes">Design Notes:<a class="anchor" aria-label="anchor" href="#design-notes"></a>
</h3>
<ul>
<li>Hydroloom uses tibble because dplyr verbs for data.frame was dropping the custom hy attributes.</li>
<li>The <code>data.table</code> package is used for some key joins to enhance scalability but dplyr is preferred for clarity.</li>
<li>
<code>hy</code> class tibble standardizes all attribute names in code.</li>
<li>graph representation facilitated by <code><a href="reference/make_index_ids.html">make_index_ids()</a></code> and <code><a href="reference/make_fromids.html">make_fromids()</a></code>
</li>
<li>names are plural when referring to identifiers and singular when referring to a numerical attribute.</li>
</ul>
</div>
</div>
</div>
<div class="section level1">
<h1 id="disclaimer">Disclaimer<a class="anchor" aria-label="anchor" href="#disclaimer"></a>
</h1>
<p>This software is preliminary or provisional and is subject to revision. It is being provided to meet the need for timely best science. The software has not received final approval by the U.S. Geological Survey (USGS). No warranty, expressed or implied, is made by the USGS or the U.S. Government as to the functionality of the software and related material nor shall the fact of release constitute any such warranty. The software is provided on the condition that neither the USGS nor the U.S. Government shall be held liable for any damages resulting from the authorized or unauthorized use of the software.</p>
<p><a href="https://creativecommons.org/publicdomain/zero/1.0/" class="external-link"><img src="https://i.creativecommons.org/p/zero/1.0/88x31.png" alt="CC0"></a></p>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/DOI-USGS/hydroloom/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>CC0</li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing hydroloom</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>David Blodgett <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9489-1710" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by David Blodgett.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
